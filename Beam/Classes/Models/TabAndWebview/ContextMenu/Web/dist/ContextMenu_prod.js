(()=>{var e={387:(e,t)=>{var n=Object.prototype.hasOwnProperty;function r(e,t,n){for(n of e.keys())if(i(n,t))return n}function i(e,t){var o,s,a;if(e===t)return!0;if(e&&t&&(o=e.constructor)===t.constructor){if(o===Date)return e.getTime()===t.getTime();if(o===RegExp)return e.toString()===t.toString();if(o===Array){if((s=e.length)===t.length)for(;s--&&i(e[s],t[s]););return-1===s}if(o===Set){if(e.size!==t.size)return!1;for(s of e){if((a=s)&&"object"==typeof a&&!(a=r(t,a)))return!1;if(!t.has(a))return!1}return!0}if(o===Map){if(e.size!==t.size)return!1;for(s of e){if((a=s[0])&&"object"==typeof a&&!(a=r(t,a)))return!1;if(!i(s[1],t.get(a)))return!1}return!0}if(o===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(o===DataView){if((s=e.byteLength)===t.byteLength)for(;s--&&e.getInt8(s)===t.getInt8(s););return-1===s}if(ArrayBuffer.isView(e)){if((s=e.byteLength)===t.byteLength)for(;s--&&e[s]===t[s];);return-1===s}if(!o||"object"==typeof e){for(o in s=0,e){if(n.call(e,o)&&++s&&!n.call(t,o))return!1;if(!(o in t)||!i(e[o],t[o]))return!1}return Object.keys(t).length===s}}return e!=e&&t!=t}t.dequal=i},754:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamDOMRectList=void 0;class n{constructor(e){this.list=e}get length(){return this.list.length}[Symbol.iterator](){return this.list.values()}item(e){return this.list[e]}}t.BeamDOMRectList=n},856:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamKeyEvent=void 0;const r=n(689);class i extends r.BeamMouseEvent{constructor(e={}){super(),Object.assign(this,e)}}t.BeamKeyEvent=i},689:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamMouseEvent=void 0;const r=n(660);class i extends r.BeamUIEvent{constructor(e={}){super(),Object.assign(this,e)}}t.BeamMouseEvent=i},177:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamNamedNodeMap=void 0;class n extends Object{constructor(e={}){super(),this.attrs=[];for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n={ATTRIBUTE_NODE:0,CDATA_SECTION_NODE:0,COMMENT_NODE:0,DOCUMENT_FRAGMENT_NODE:0,DOCUMENT_NODE:0,DOCUMENT_POSITION_CONTAINED_BY:0,DOCUMENT_POSITION_CONTAINS:0,DOCUMENT_POSITION_DISCONNECTED:0,DOCUMENT_POSITION_FOLLOWING:0,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:0,DOCUMENT_POSITION_PRECEDING:0,DOCUMENT_TYPE_NODE:0,ELEMENT_NODE:0,ENTITY_NODE:0,ENTITY_REFERENCE_NODE:0,NOTATION_NODE:0,PROCESSING_INSTRUCTION_NODE:0,TEXT_NODE:0,addEventListener(e,t,n){},appendChild(e){},baseURI:"",childNodes:void 0,cloneNode(e){},compareDocumentPosition:e=>0,contains:e=>!1,dispatchEvent:e=>!1,firstChild:void 0,getRootNode(e){},hasChildNodes:()=>!1,insertBefore(e,t){},isConnected:!1,isDefaultNamespace:e=>!1,isEqualNode:e=>!1,isSameNode:e=>!1,lastChild:void 0,lookupNamespaceURI(e){},lookupPrefix(e){},namespaceURI:void 0,nextSibling:void 0,nodeName:"",nodeType:0,nodeValue:void 0,ownerDocument:void 0,ownerElement:void 0,parentElement:void 0,parentNode:void 0,prefix:void 0,previousSibling:void 0,removeChild(e){},removeEventListener(e,t,n){},replaceChild(e,t){},specified:!1,textContent:void 0,normalize(){},name:t,localName:t,value:e[t]};this.setNamedItem(n)}}get length(){return this.attrs.length}getNamedItem(e){return this.attrs.find((t=>t.localName===e))}getNamedItemNS(e,t){return this.getNamedItem(`${e}.${t}`)}item(e){return this.attrs[e]}removeNamedItem(e){const t=this.getNamedItem(e),n=this.attrs.indexOf(t);return this.attrs.splice(n,1),t}removeNamedItemNS(e,t){return this.removeNamedItem(e+"."+t)}setNamedItem(e){const t=this.getNamedItem(e.localName);return t&&this.removeNamedItem(e.localName),this.attrs.push(e),t}setNamedItemNS(e){}[Symbol.iterator](){return this.attrs.values()}toString(){return this.attrs.map((e=>`${e.name}="${e.value}"`)).join(" ")}}t.BeamNamedNodeMap=n},148:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamHTMLCollection=t.BeamLogCategory=t.BeamLogLevel=t.FrameInfo=t.BeamResizeObserver=t.BeamMutationObserver=t.BeamWebkitPresentationMode=t.BeamNodeType=t.NoteInfo=t.BeamRect=t.MediaPlayState=t.BeamSize=void 0;class n{constructor(e,t){this.width=e,this.height=t}}t.BeamSize=n,function(e){e.ready="ready",e.playing="playing",e.paused="paused",e.ended="ended"}(t.MediaPlayState||(t.MediaPlayState={}));t.BeamRect=class extends n{constructor(e,t,n,r){super(n,r),this.x=e,this.y=t}};t.NoteInfo=class{},function(e){e[e.element=1]="element",e[e.text=3]="text",e[e.processing_instruction=7]="processing_instruction",e[e.comment=8]="comment",e[e.document=9]="document",e[e.document_type=10]="document_type",e[e.document_fragment=11]="document_fragment"}(t.BeamNodeType||(t.BeamNodeType={})),function(e){e.inline="inline",e.fullscreen="fullscreen",e.pip="picture-in-picture"}(t.BeamWebkitPresentationMode||(t.BeamWebkitPresentationMode={}));t.BeamMutationObserver=class{constructor(e){this.fn=e,new e}disconnect(){throw new Error("Method not implemented.")}observe(e,t){throw new Error("Method not implemented.")}takeRecords(){throw new Error("Method not implemented.")}};t.BeamResizeObserver=class{constructor(){}disconnect(){throw new Error("Method not implemented.")}observe(e,t){throw new Error("Method not implemented.")}unobserve(e){throw new Error("Method not implemented.")}};t.FrameInfo=class{},function(e){e.log="log",e.warning="warning",e.error="error",e.debug="debug"}(t.BeamLogLevel||(t.BeamLogLevel={})),function(e){e.general="general",e.pointAndShoot="pointAndShoot",e.embedNode="embedNode",e.webpositions="webpositions",e.navigation="navigation",e.native="native",e.passwordManager="passwordManager",e.webAutofillInternal="webAutofillInternal"}(t.BeamLogCategory||(t.BeamLogCategory={}));class r{constructor(e){this.values=e}get length(){return this.values.length}[Symbol.iterator](){return this.values.values()}item(e){return this.values[e]}namedItem(e){return this.item(parseInt(e,10))}}t.BeamHTMLCollection=r},660:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamUIEvent=void 0;t.BeamUIEvent=class{preventDefault(){}stopPropagation(){}}},492:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Native=void 0;class n{constructor(e,t){if(this.win=e,this.href=e.location.href,this.componentPrefix=t,this.messageHandlers=e.webkit&&e.webkit.messageHandlers,!this.messageHandlers)throw Error("Could not find webkit message handlers")}static getInstance(e,t){return n.instance||(n.instance=new n(e,t)),n.instance}sendMessage(e,t){const n=`${this.componentPrefix}_${e}`,r=this.messageHandlers[n];if(!r)throw Error(`No message handler for message "${n}"`);{const e=this.win.location.href;r.postMessage(Object.assign({href:e},t),e)}}toString(){return this.constructor.name}}t.Native=n},377:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(148),t),i(n(856),t),i(n(689),t),i(n(492),t),i(n(177),t),i(n(660),t),i(n(754),t)},663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamElementHelper=void 0;const r=n(336),i=n(581);class o{static getAttribute(e,t){const n=t.attributes.getNamedItem(e);return null==n?void 0:n.value}static getType(e){return o.getAttribute("type",e)}static getContentEditable(e){return o.getAttribute("contenteditable",e)||"inherit"}static isTextualInputType(e){const t=e.tagName.toLowerCase();if("textarea"===t)return!0;if("input"===t){return["text","email","password","date","datetime-local","month","number","search","tel","time","url","week","datetime"].includes(e.type)}return!1}static getTextValue(e){let t;switch(e.tagName.toLowerCase()){case"input":{const n=e;o.isTextualInputType(n)&&(t=n.value)}break;case"textarea":t=e.value;break;default:t=e.innerText}return t}static getBackgroundImageURL(e,t){var n;const r=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e),i=null==r?void 0:r.backgroundImage.match(/url\(([^)]+)/);if(i&&i.length>1)return i[1].replace(/('|")/g,"")}static hasParentOfType(e,t,n=10){if(n<=0)return null;if("BODY"!==t&&"BODY"===(null==e?void 0:e.tagName))return null;if(!(null==e?void 0:e.parentElement))return null;if(t===(null==e?void 0:e.tagName))return e;const r=n--;return o.hasParentOfType(e.parentElement,t,r)}static parseElementBasedOnStyles(e,t){const n=new i.BeamEmbedHelper(t);if(n.isEmbeddableElement(e)){const t=n.parseElementForEmbed(e);if(t)return t}return e}static isVisible(e,t){var n;let r=!1;if(e){r=!0;const i=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e);if(i&&(r=!("none"===i.getPropertyValue("display")||["hidden","collapse"].includes(i.getPropertyValue("visibility"))||"1px"===i.getPropertyValue("width")&&"1px"===i.getPropertyValue("height")||["0px","0"].includes(i.getPropertyValue("width"))||["0px","0"].includes(i.getPropertyValue("height"))||"absolute"===i.getPropertyValue("position")&&i.getPropertyValue("clip").match(/rect\((0(px)?[, ]+){3}0px\)/)||i.getPropertyValue("clip-path").match(/inset\(([5-9]\d|100)%\)/))),r){const t=e.getBoundingClientRect();r=t.width>0&&t.height>0}}return r}static isMedia(e){return["video","audio"].includes(e.tagName.toLowerCase())||Boolean(e.querySelectorAll("video, audio").length)}static isImageOrContainsImageChild(e,t){return o.isImage(e,t,(e=>["img","svg"].includes(e.tagName.toLowerCase())||Boolean(e.querySelectorAll("img, svg").length)))}static isImage(e,t,n=o.imageElementMatcher){var r;if(n(e))return!0;const i=null===(r=t.getComputedStyle)||void 0===r?void 0:r.call(t,e);return!!(null==i?void 0:i.backgroundImage.match(/url\(([^)]+)/))}static isImageContainer(e,t){return!!o.isImage(e,t)||e.children.length>0&&[...e.children].every((e=>o.isImageContainer(e,t)))}static getSvgRoot(e){if(!["body","html"].includes(e.tagName.toLowerCase()))return"svg"===e.tagName.toLowerCase()?e:e.parentElement?o.getSvgRoot(e.parentElement):void 0}static getPositionedElement(e,t){var n;if(!e||e===t.document.body)return;const r=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e);return e.parentElement&&"static"===(null==r?void 0:r.position)?o.getPositionedElement(e.parentElement,t):"static"!==(null==r?void 0:r.position)?e:void 0}static getOverflowEscapingElement(e,t,n){var r;if(!e||e===n.document.body)return;const i=null===(r=n.getComputedStyle)||void 0===r?void 0:r.call(n,e);if(i)switch(i.position){case"absolute":{const r=o.getPositionedElement(e.parentElement,n);return r&&r.contains(t),e}case"fixed":return e;default:return o.getOverflowEscapingElement(e.parentElement,t,n)}}static getClippingElement(e,t){var n;if(e===t.document.body)return;const r=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e);if(r){if("visible"!==r.getPropertyValue("overflow")||"visible"!==r.getPropertyValue("overflow-x")||"visible"!==r.getPropertyValue("overflow-y")||"auto"!==r.getPropertyValue("clip")||"none"!==r.getPropertyValue("clip-path"))return e;if(e.parentElement)return o.getClippingElement(e.parentElement,t)}else if(e.parentElement)return o.getClippingElement(e.parentElement,t)}static getClippingElements(e,t){const n=o.getClippingElement(e,t);return n?n.parentElement&&n.parentElement!==t.document.body?[n,...o.getClippingElements(n.parentElement,t)]:[n]:[]}static getClippingArea(e,t){return e.map((e=>{var n;const r=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e);if(r){const t="visible"!==r.getPropertyValue("overflow-x"),n="visible"!==r.getPropertyValue("overflow-y"),i=e.getBoundingClientRect();return t&&!n?{x:i.x,width:i.width,y:-1/0,height:1/0}:n&&!t?{y:i.y,height:i.height,x:-1/0,width:1/0}:i}})).reduce(((e,t)=>e?r.BeamRectHelper.intersection(e,t):t),null)}static getClippingContainers(e,t){return o.getClippingElements(e,t).filter((n=>{const r=o.getOverflowEscapingElement(e,n,t);return!r||r.contains(n)}))}static isLargerThanWindow(e,t){const n=100/t.innerHeight*e.height>110;if(n)return n;return 100/t.innerWidth*e.width>110}}t.BeamElementHelper=o,o.imageElementMatcher=e=>["img","svg"].includes(e.tagName.toLowerCase())},581:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamEmbedHelper=void 0;const r=n(387);t.BeamEmbedHelper=class{constructor(e){this.embedPattern="__EMBEDPATTERN__",this.win=e,this.embedRegex=new RegExp(this.embedPattern,"i"),this.firstLocationLoaded=this.win.location}isEmbeddableElement(e){const t=this.isOnFullEmbeddablePage();if(t)return t;switch(this.win.location.hostname){case"twitter.com":return this.isTweet(e);case"www.youtube.com":return this.isYouTubeThumbnail(e)||this.isEmbeddableIframe(e)||this.win.location.pathname.includes("/embed/");default:return this.isEmbeddableIframe(e)}}getEmbeddableWindowLocation(){const e=[this.win.location.href,this.firstLocationLoaded.href];if((0,r.dequal)(e,this.getEmbeddableWindowLocationLastUrls))return this.getEmbeddableWindowLocationLastResult;const t=e.find((e=>this.embedRegex.test(e)));return this.getEmbeddableWindowLocationLastUrls=e,this.getEmbeddableWindowLocationLastResult=t,t}isOnFullEmbeddablePage(){return this.urlMatchesEmbedProvider([this.win.location.href,this.firstLocationLoaded.href])&&this.isInsideIframe()}isEmbeddableIframe(e){return!!["iframe"].includes(e.tagName.toLowerCase())&&this.urlMatchesEmbedProvider([e.src])}urlMatchesEmbedProvider(e){if((0,r.dequal)(e,this.urlMatchesEmbedProviderLastUrls))return this.urlMatchesEmbedProviderLastResult;const t=e.some((e=>!!e&&(this.embedRegex.test(e)||e.includes("youtube.com/embed"))));return this.urlMatchesEmbedProviderLastUrls=e,this.urlMatchesEmbedProviderLastResult=t,t}isInsideIframe(){try{return window.self!==window.top}catch(e){return!0}}parseElementForEmbed(e){const{hostname:t}=this.win.location;switch(t){case"twitter.com":return this.parseTwitterElementForEmbed(e);case"www.youtube.com":if(this.win.location.pathname.includes("/embed/")){const e=window.location.pathname.split("/").pop();return this.createLinkElement(`https://www.youtube.com/watch?v=${e}`)}return this.parseYouTubeThumbnailForEmbed(e);default:if(e.src&&this.urlMatchesEmbedProvider([e.src]))return this.createLinkElement(e.src)}}parseTwitterElementForEmbed(e){if(!this.isTweet(e))return;const t=e.querySelectorAll('a[href*="/status/"]'),n=null==t?void 0:t[0].href;return n?this.createLinkElement(n):void 0}isTweet(e){return"tweet"==e.getAttribute("data-testid")}isYouTubeThumbnail(e){var t,n;if(Boolean(null===(t=null==e?void 0:e.href)||void 0===t?void 0:t.includes("/watch?v=")))return!0;const r=this.hasParentOfType(e,"A",5);return Boolean(null===(n=null==r?void 0:r.href)||void 0===n?void 0:n.includes("/watch?v="))}hasParentOfType(e,t,n=10){if(n<=0)return null;if("BODY"!==t&&"BODY"===(null==e?void 0:e.tagName))return null;if(!(null==e?void 0:e.parentElement))return null;if(t===(null==e?void 0:e.tagName))return e;const r=n--;return this.hasParentOfType(e.parentElement,t,r)}parseYouTubeThumbnailForEmbed(e){var t,n;if(!this.isYouTubeThumbnail(e))return;if(null===(t=null==e?void 0:e.href)||void 0===t?void 0:t.includes("/watch?v="))return this.createLinkElement(null==e?void 0:e.href);const r=this.hasParentOfType(e,"A",5);return(null===(n=null==r?void 0:r.href)||void 0===n?void 0:n.includes("/watch?v="))?this.createLinkElement(null==r?void 0:r.href):void 0}createLinkElement(e){const t=this.win.document.createElement("a");return t.setAttribute("href",e),t.innerText=e,t}}},619:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamLogger=void 0;const r=n(377);t.BeamLogger=class{constructor(e,t){this.native=new r.Native(e,"beam_logger"),this.category=t}log(...e){const t=this.convertArgsToMessage(e);this.sendMessage(t,r.BeamLogLevel.log)}logWarning(...e){const t=this.convertArgsToMessage(e);this.sendMessage(t,r.BeamLogLevel.warning)}logDebug(...e){const t=this.convertArgsToMessage(e);this.sendMessage(t,r.BeamLogLevel.debug)}logError(...e){const t=this.convertArgsToMessage(e);this.sendMessage(t,r.BeamLogLevel.error)}sendMessage(e,t){this.native.sendMessage("log",{message:e,level:t,category:this.category})}convertArgsToMessage(e){return Object.values(e).map((e=>{let t;if("object"==typeof e)try{t=JSON.stringify(e)}catch(e){}return t||(t=String(e)),t})).map((e=>e.substring(0,3e3))).join(", ")}}},336:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamRectHelper=void 0;t.BeamRectHelper=class{static filterRectArrayByRectArray(e,t){return e.filter((e=>0==this.doRectMatchesRectsInArray(e,t)))}static doRectMatchesRectsInArray(e,t){return t.some((t=>this.doRectsMatch(e,t)))}static doRectsMatch(e,t){return Math.round(null==e?void 0:e.x)==Math.round(null==t?void 0:t.x)&&Math.round(null==e?void 0:e.y)==Math.round(null==t?void 0:t.y)&&Math.round(null==e?void 0:e.height)==Math.round(null==t?void 0:t.height)&&Math.round(null==e?void 0:e.width)==Math.round(null==t?void 0:t.width)}static boundingRect(e,t){const n=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return{x:n,y:r,width:Math.max(e.x+e.width,t.x+t.width)-n,height:Math.max(e.y+e.height,t.y+t.height)-r}}static intersection(e,t){const n=Math.max(e.x,t.x),r=Math.max(e.y,t.y),i=[e.x+e.width,t.x+t.width].filter((e=>!isNaN(e))),o=Math.min(...i),s=[e.y+e.height,t.y+t.height].filter((e=>!isNaN(e))),a=Math.min(...s);if(o>n&&a>r)return{x:n,y:r,width:o-n,height:a-r}}}},899:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointAndShootHelper=void 0;const r=n(377),i=n(663),o=n(581);class s{static isOnlyMarkupChar(e){return 1==e.length&&["•","-","|","–","—","·"].includes(e)}static isTextMeaningful(e){if(e){const t=e.trim();return!!t&&!this.isOnlyMarkupChar(t)}return!1}static isMeaningful(e,t){return(new o.BeamEmbedHelper(t).isEmbeddableElement(e)||i.BeamElementHelper.isMedia(e)||i.BeamElementHelper.isImageContainer(e,t)||s.isTextMeaningful(i.BeamElementHelper.getTextValue(e)))&&i.BeamElementHelper.isVisible(e,t)}static isUselessSiteSpecificElement(e,t){var n;return!(!(null===(n=t.location.hostname)||void 0===n?void 0:n.includes("amazon."))||"magnifierLens"!=e.id)}static isMeaningfulOrChildrenAre(e,t){return!!s.isMeaningful(e,t)||[...e.children].some((e=>s.isMeaningful(e,t)))}static getMeaningfulChildNodes(e,t){return[...e.childNodes].filter((e=>e.nodeType===r.BeamNodeType.element&&s.isMeaningfulOrChildrenAre(e,t)||e.nodeType===r.BeamNodeType.text&&s.isTextMeaningful(e.data)))}static isUselessOrChildrenAre(e,t){return 0==s.isMeaningfulOrChildrenAre(e,t)}static getElementAndTextChildNodesRecursively(e,t){if(!(null==e?void 0:e.childNodes))return[e];const n=[];return[...e.childNodes].forEach((e=>{switch(e.nodeType){case r.BeamNodeType.element:n.push(e);const i=this.getElementAndTextChildNodesRecursively(e,t);n.push(...i);break;case r.BeamNodeType.text:n.push(e)}})),0==n.length?[e]:n}static isOnlyAltKey(e){return(e.altKey||"Alt"==e.key)&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey}static upsertShootGroup(e,t){const n=t.findIndex((({element:t})=>t==e.element));-1!=n?t[n]=e:t.push(e)}static upsertRangeGroup(e,t){const n=t.findIndex((({id:t})=>t==e.id));-1!=n?t[n]=e:t.push(e)}static isExplicitlyContentEditable(e){return["true","plaintext-only"].includes(i.BeamElementHelper.getContentEditable(e))}static getInheritedContentEditable(e){let t=this.isExplicitlyContentEditable(e);const n=e.parentElement;return n&&"inherit"===i.BeamElementHelper.getContentEditable(e)&&(t=this.getInheritedContentEditable(n)),t}static isTargetTextualInput(e){return i.BeamElementHelper.isTextualInputType(e)||this.getInheritedContentEditable(e)}static isEventTargetActive(e,t){return!(!e.document.activeElement||e.document.activeElement===e.document.body||!e.document.activeElement.contains(t))}static isActiveTextualInput(e,t){return this.isEventTargetActive(e,t)&&this.isTargetTextualInput(t)}static hasMouseLocationChanged(e,t,n){return(null==e?void 0:e.x)!==t||(null==e?void 0:e.y)!==n}static hasFocusedTextualInput(e){const t=e.document.activeElement;return!!t&&(i.BeamElementHelper.isTextualInputType(t)||this.getInheritedContentEditable(t))}static isPointDisabled(e,t){return this.isActiveTextualInput(e,t)||this.hasFocusedTextualInput(e)||this.hasSelection(e)}static hasSelection(e){return!e.document.getSelection().isCollapsed&&Boolean(e.document.getSelection().toString())}static getSelectionRanges(e){const t=[],n=e.rangeCount;for(let r=0;r<n;++r){const n=e.getRangeAt(r);t.push(n)}return t}static getSelection(e){return e.document.getSelection()}static getElementAtMouseLocation(e,t){return e.document.elementFromPoint(t.x,t.y)}static getOffset(e,t){e&&(t.x+=e.offsetLeft,t.y+=e.offsetTop,s.getOffset(e.offsetParent,t))}static getScrolled(e,t){e&&(t.x+=e.scrollLeft,t.y+=e.scrollTop,"html"!=e.tagName.toLowerCase()&&s.getScrolled(e.parentNode,t))}static getTopLeft(e){const t={x:0,y:0};s.getOffset(e,t);const n={x:0,y:0};s.getScrolled(e.parentNode,n);return{x:t.x-n.x,y:t.y-n.y}}static clamp(e,t,n){return e>n?n:e<t?t:e}static compact(e){return e.filter((e=>null!=e))}static isNumberInRange(e,t,n){return Number(e)>=Math.min(t,n)&&e<=Math.max(t,n)}static mapRangeToRange(e,t,n){return t[0]+(n-e[0])*(t[1]-t[0])/(e[1]-e[0])}static uuid(e){const t=new Uint32Array(4);return e.crypto.getRandomValues(t).join("-")}static removeFromArray(e,t){const n=t.findIndex(e);return n>=0&&t.splice(n,1),t}}t.PointAndShootHelper=s},995:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointAndShootHelper=t.BeamElementHelper=t.BeamEmbedHelper=t.BeamRectHelper=t.BeamLogger=void 0;const r=n(619);Object.defineProperty(t,"BeamLogger",{enumerable:!0,get:function(){return r.BeamLogger}});const i=n(336);Object.defineProperty(t,"BeamRectHelper",{enumerable:!0,get:function(){return i.BeamRectHelper}});const o=n(581);Object.defineProperty(t,"BeamEmbedHelper",{enumerable:!0,get:function(){return o.BeamEmbedHelper}});const s=n(663);Object.defineProperty(t,"BeamElementHelper",{enumerable:!0,get:function(){return s.BeamElementHelper}});const a=n(899);Object.defineProperty(t,"PointAndShootHelper",{enumerable:!0,get:function(){return a.PointAndShootHelper}})},586:(e,t,n)=>{"use strict";t.x=void 0;const r=n(377),i=n(995);var o;!function(e){e[e.Page=1]="Page",e[e.TextSelection=2]="TextSelection",e[e.Link=4]="Link",e[e.Image=8]="Image",e[e.Ignored=16]="Ignored"}(o||(o={}));t.x=class{constructor(e,t){this.ui=t,this.win=e,this.logger=new i.BeamLogger(e,r.BeamLogCategory.embedNode),this.registerEventListeners()}registerEventListeners(){this.win.addEventListener("contextmenu",this.onContextMenu.bind(this))}onContextMenu(e){const t=this.menuInvokedMessageForTarget(e.target);this.ui.sendMenuInvoked(t)}menuInvokedMessageForTarget(e){var t;const[n,r]=this.elementsAndInvocationType(e);var i={invocations:r,parameters:{}},s={};return 0!=(r&o.TextSelection)&&(s=Object.assign(Object.assign({},s),{contents:this.win.document.getSelection().toString()})),0!=(r&o.Link)&&(s=Object.assign(Object.assign({},s),{href:null!==(t=n[0].href)&&void 0!==t?t:n[1].href})),0!=(r&o.Image)&&(s=Object.assign(Object.assign({},s),{src:this.getSrcFromImageElement(n[0])})),i.parameters=s,i}findLinkWithinParents(e){for(var t=e.parentElement,n="A"==t.tagName;!n&&t!=this.win.document.body;)n="A"==(t=t.parentElement).tagName;return n?t:null}elementsAndInvocationType(e,t){if(null==e||e==this.win.document.body)return[[e],o.Page];if("VIDEO"==e.tagName||"AUDIO"==e.tagName||"INPUT"==e.tagName||"TEXTAREA"==e.tagName)return[[e],o.Ignored];if("A"==e.tagName)return[[e],o.Link];if("IMG"==e.tagName)return(r=this.findLinkWithinParents(e))?[[e,r],o.Link|o.Image]:[[e],o.Image];const n=this.win.document.getSelection();var r;return null!=n&&e.contains(n.anchorNode)&&n.toString()?(r=this.findLinkWithinParents(e))?[[e,r],o.Link|o.TextSelection]:[[e],o.TextSelection]:this.elementsAndInvocationType(e.parentElement,o.Page)}getSrcFromImageElement(e){return null!=e.src&&""!=e.src?e.src:e.currentSrc}toString(){return this.constructor.name}}},252:(e,t,n)=>{"use strict";t.Q=void 0;const r=n(377),i=n(995);class o{constructor(e){this.native=e,this.logger=new i.BeamLogger(this.native.win,r.BeamLogCategory.embedNode)}static getInstance(e){let t;try{const n=r.Native.getInstance(e,"ContextMenu");t=new o(n)}catch(e){t=null}return t}sendMenuInvoked(e){this.native.sendMessage("menuInvoked",e)}toString(){return this.constructor.name}}t.Q=o}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(377),t=n(586),r=n(252);const i=e.Native.getInstance(window,"ContextMenu"),o=new r.Q(i);window.beam||(window.beam={}),window.beam.__ID__ContextMenu=new t.x(window,o)})()})();