(()=>{var e={509:e=>{function t(e,t,n){var i,r,s,o,a;function l(){var u=Date.now()-o;u<t&&u>=0?i=setTimeout(l,t-u):(i=null,n||(a=e.apply(s,r),s=r=null))}null==t&&(t=100);var u=function(){s=this,r=arguments,o=Date.now();var u=n&&!i;return i||(i=setTimeout(l,t)),u&&(a=e.apply(s,r),s=r=null),a};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(a=e.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}t.debounce=t,e.exports=t},835:(e,t)=>{var n=Object.prototype.hasOwnProperty;function i(e,t,n){for(n of e.keys())if(r(n,t))return n}function r(e,t){var s,o,a;if(e===t)return!0;if(e&&t&&(s=e.constructor)===t.constructor){if(s===Date)return e.getTime()===t.getTime();if(s===RegExp)return e.toString()===t.toString();if(s===Array){if((o=e.length)===t.length)for(;o--&&r(e[o],t[o]););return-1===o}if(s===Set){if(e.size!==t.size)return!1;for(o of e){if((a=o)&&"object"==typeof a&&!(a=i(t,a)))return!1;if(!t.has(a))return!1}return!0}if(s===Map){if(e.size!==t.size)return!1;for(o of e){if((a=o[0])&&"object"==typeof a&&!(a=i(t,a)))return!1;if(!r(o[1],t.get(a)))return!1}return!0}if(s===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(s===DataView){if((o=e.byteLength)===t.byteLength)for(;o--&&e.getInt8(o)===t.getInt8(o););return-1===o}if(ArrayBuffer.isView(e)){if((o=e.byteLength)===t.byteLength)for(;o--&&e[o]===t[o];);return-1===o}if(!s||"object"==typeof e){for(s in o=0,e){if(n.call(e,s)&&++o&&!n.call(t,s))return!1;if(!(s in t)||!r(e[s],t[s]))return!1}return Object.keys(t).length===o}}return e!=e&&t!=t}t.dequal=r},954:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamDOMRectList=void 0;class n{constructor(e){this.list=e}get length(){return this.list.length}[Symbol.iterator](){return this.list.values()}item(e){return this.list[e]}}t.BeamDOMRectList=n},202:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamKeyEvent=void 0;const i=n(712);class r extends i.BeamMouseEvent{constructor(e={}){super(),Object.assign(this,e)}}t.BeamKeyEvent=r},712:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamMouseEvent=void 0;const i=n(117);class r extends i.BeamUIEvent{constructor(e={}){super(),Object.assign(this,e)}}t.BeamMouseEvent=r},629:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamNamedNodeMap=void 0;class n extends Object{constructor(e={}){super(),this.attrs=[];for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n={ATTRIBUTE_NODE:0,CDATA_SECTION_NODE:0,COMMENT_NODE:0,DOCUMENT_FRAGMENT_NODE:0,DOCUMENT_NODE:0,DOCUMENT_POSITION_CONTAINED_BY:0,DOCUMENT_POSITION_CONTAINS:0,DOCUMENT_POSITION_DISCONNECTED:0,DOCUMENT_POSITION_FOLLOWING:0,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:0,DOCUMENT_POSITION_PRECEDING:0,DOCUMENT_TYPE_NODE:0,ELEMENT_NODE:0,ENTITY_NODE:0,ENTITY_REFERENCE_NODE:0,NOTATION_NODE:0,PROCESSING_INSTRUCTION_NODE:0,TEXT_NODE:0,addEventListener(e,t,n){},appendChild(e){},baseURI:"",childNodes:void 0,cloneNode(e){},compareDocumentPosition:e=>0,contains:e=>!1,dispatchEvent:e=>!1,firstChild:void 0,getRootNode(e){},hasChildNodes:()=>!1,insertBefore(e,t){},isConnected:!1,isDefaultNamespace:e=>!1,isEqualNode:e=>!1,isSameNode:e=>!1,lastChild:void 0,lookupNamespaceURI(e){},lookupPrefix(e){},namespaceURI:void 0,nextSibling:void 0,nodeName:"",nodeType:0,nodeValue:void 0,ownerDocument:void 0,ownerElement:void 0,parentElement:void 0,parentNode:void 0,prefix:void 0,previousSibling:void 0,removeChild(e){},removeEventListener(e,t,n){},replaceChild(e,t){},specified:!1,textContent:void 0,normalize(){},name:t,localName:t,value:e[t]};this.setNamedItem(n)}}get length(){return this.attrs.length}getNamedItem(e){return this.attrs.find((t=>t.localName===e))}getNamedItemNS(e,t){return this.getNamedItem(`${e}.${t}`)}item(e){return this.attrs[e]}removeNamedItem(e){const t=this.getNamedItem(e),n=this.attrs.indexOf(t);return this.attrs.splice(n,1),t}removeNamedItemNS(e,t){return this.removeNamedItem(e+"."+t)}setNamedItem(e){const t=this.getNamedItem(e.localName);return t&&this.removeNamedItem(e.localName),this.attrs.push(e),t}setNamedItemNS(e){}[Symbol.iterator](){return this.attrs.values()}toString(){return this.attrs.map((e=>`${e.name}="${e.value}"`)).join(" ")}}t.BeamNamedNodeMap=n},836:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamHTMLCollection=t.BeamLogCategory=t.BeamLogLevel=t.FrameInfo=t.BeamResizeObserver=t.BeamMutationObserver=t.BeamWebkitPresentationMode=t.BeamNodeType=t.NoteInfo=t.BeamRect=t.MediaPlayState=t.BeamSize=void 0;class n{constructor(e,t){this.width=e,this.height=t}}t.BeamSize=n,function(e){e.ready="ready",e.playing="playing",e.paused="paused",e.ended="ended"}(t.MediaPlayState||(t.MediaPlayState={}));t.BeamRect=class extends n{constructor(e,t,n,i){super(n,i),this.x=e,this.y=t}};t.NoteInfo=class{},function(e){e[e.element=1]="element",e[e.text=3]="text",e[e.processing_instruction=7]="processing_instruction",e[e.comment=8]="comment",e[e.document=9]="document",e[e.document_type=10]="document_type",e[e.document_fragment=11]="document_fragment"}(t.BeamNodeType||(t.BeamNodeType={})),function(e){e.inline="inline",e.fullscreen="fullscreen",e.pip="picture-in-picture"}(t.BeamWebkitPresentationMode||(t.BeamWebkitPresentationMode={}));t.BeamMutationObserver=class{constructor(e){this.fn=e,new e}disconnect(){throw new Error("Method not implemented.")}observe(e,t){throw new Error("Method not implemented.")}takeRecords(){throw new Error("Method not implemented.")}};t.BeamResizeObserver=class{constructor(){}disconnect(){throw new Error("Method not implemented.")}observe(e,t){throw new Error("Method not implemented.")}unobserve(e){throw new Error("Method not implemented.")}};t.FrameInfo=class{},function(e){e.log="log",e.warning="warning",e.error="error",e.debug="debug"}(t.BeamLogLevel||(t.BeamLogLevel={})),function(e){e.general="general",e.pointAndShoot="pointAndShoot",e.embedNode="embedNode",e.webpositions="webpositions",e.navigation="navigation",e.native="native",e.passwordManager="passwordManager",e.webAutofillInternal="webAutofillInternal"}(t.BeamLogCategory||(t.BeamLogCategory={}));class i{constructor(e){this.values=e}get length(){return this.values.length}[Symbol.iterator](){return this.values.values()}item(e){return this.values[e]}namedItem(e){return this.item(parseInt(e,10))}}t.BeamHTMLCollection=i},117:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamUIEvent=void 0;t.BeamUIEvent=class{preventDefault(){}stopPropagation(){}}},326:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Native=void 0;class n{constructor(e,t){if(this.win=e,this.href=e.location.href,this.componentPrefix=t,this.messageHandlers=e.webkit&&e.webkit.messageHandlers,!this.messageHandlers)throw Error("Could not find webkit message handlers")}static getInstance(e,t){return n.instance||(n.instance=new n(e,t)),n.instance}sendMessage(e,t){const n=`${this.componentPrefix}_${e}`,i=this.messageHandlers[n];if(!i)throw Error(`No message handler for message "${n}"`);{const e=this.win.location.href;i.postMessage(Object.assign({href:e},t),e)}}toString(){return this.constructor.name}}t.Native=n},990:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(836),t),r(n(202),t),r(n(712),t),r(n(326),t),r(n(629),t),r(n(117),t),r(n(954),t)},646:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamElementHelper=void 0;const i=n(799),r=n(400);class s{static getAttribute(e,t){const n=t.attributes.getNamedItem(e);return null==n?void 0:n.value}static getType(e){return s.getAttribute("type",e)}static getContentEditable(e){return s.getAttribute("contenteditable",e)||"inherit"}static isTextualInputType(e){const t=e.tagName.toLowerCase();if("textarea"===t)return!0;if("input"===t){return["text","email","password","date","datetime-local","month","number","search","tel","time","url","week","datetime"].includes(e.type)}return!1}static getTextValue(e){let t;switch(e.tagName.toLowerCase()){case"input":{const n=e;s.isTextualInputType(n)&&(t=n.value)}break;case"textarea":t=e.value;break;default:t=e.innerText}return t}static getBackgroundImageURL(e,t){var n;const i=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e),r=null==i?void 0:i.backgroundImage.match(/url\(([^)]+)/);if(r&&r.length>1)return r[1].replace(/('|")/g,"")}static hasParentOfType(e,t,n=10){if(n<=0)return null;if("BODY"!==t&&"BODY"===(null==e?void 0:e.tagName))return null;if(!(null==e?void 0:e.parentElement))return null;if(t===(null==e?void 0:e.tagName))return e;const i=n--;return s.hasParentOfType(e.parentElement,t,i)}static parseElementBasedOnStyles(e,t){const n=new r.BeamEmbedHelper(t);if(n.isEmbeddableElement(e)){const t=n.parseElementForEmbed(e);if(t)return t}return e}static isVisible(e,t){var n;let i=!1;if(e){i=!0;const r=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e);if(r&&(i=!("none"===r.getPropertyValue("display")||["hidden","collapse"].includes(r.getPropertyValue("visibility"))||"1px"===r.getPropertyValue("width")&&"1px"===r.getPropertyValue("height")||["0px","0"].includes(r.getPropertyValue("width"))||["0px","0"].includes(r.getPropertyValue("height"))||"absolute"===r.getPropertyValue("position")&&r.getPropertyValue("clip").match(/rect\((0(px)?[, ]+){3}0px\)/)||r.getPropertyValue("clip-path").match(/inset\(([5-9]\d|100)%\)/))),i){const t=e.getBoundingClientRect();i=t.width>0&&t.height>0}}return i}static isMedia(e){return["video","audio"].includes(e.tagName.toLowerCase())||Boolean(e.querySelectorAll("video, audio").length)}static isImageOrContainsImageChild(e,t){return s.isImage(e,t,(e=>["img","svg"].includes(e.tagName.toLowerCase())||Boolean(e.querySelectorAll("img, svg").length)))}static isImage(e,t,n=s.imageElementMatcher){var i;if(n(e))return!0;const r=null===(i=t.getComputedStyle)||void 0===i?void 0:i.call(t,e);return!!(null==r?void 0:r.backgroundImage.match(/url\(([^)]+)/))}static isImageContainer(e,t){return!!s.isImage(e,t)||e.children.length>0&&[...e.children].every((e=>s.isImageContainer(e,t)))}static getSvgRoot(e){if(!["body","html"].includes(e.tagName.toLowerCase()))return"svg"===e.tagName.toLowerCase()?e:e.parentElement?s.getSvgRoot(e.parentElement):void 0}static getPositionedElement(e,t){var n;if(!e||e===t.document.body)return;const i=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e);return e.parentElement&&"static"===(null==i?void 0:i.position)?s.getPositionedElement(e.parentElement,t):"static"!==(null==i?void 0:i.position)?e:void 0}static getOverflowEscapingElement(e,t,n){var i;if(!e||e===n.document.body)return;const r=null===(i=n.getComputedStyle)||void 0===i?void 0:i.call(n,e);if(r)switch(r.position){case"absolute":{const i=s.getPositionedElement(e.parentElement,n);return i&&i.contains(t),e}case"fixed":return e;default:return s.getOverflowEscapingElement(e.parentElement,t,n)}}static getClippingElement(e,t){var n;if(e===t.document.body)return;const i=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e);if(i){if("visible"!==i.getPropertyValue("overflow")||"visible"!==i.getPropertyValue("overflow-x")||"visible"!==i.getPropertyValue("overflow-y")||"auto"!==i.getPropertyValue("clip")||"none"!==i.getPropertyValue("clip-path"))return e;if(e.parentElement)return s.getClippingElement(e.parentElement,t)}else if(e.parentElement)return s.getClippingElement(e.parentElement,t)}static getClippingElements(e,t){const n=s.getClippingElement(e,t);return n?n.parentElement&&n.parentElement!==t.document.body?[n,...s.getClippingElements(n.parentElement,t)]:[n]:[]}static getClippingArea(e,t){return e.map((e=>{var n;const i=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e);if(i){const t="visible"!==i.getPropertyValue("overflow-x"),n="visible"!==i.getPropertyValue("overflow-y"),r=e.getBoundingClientRect();return t&&!n?{x:r.x,width:r.width,y:-1/0,height:1/0}:n&&!t?{y:r.y,height:r.height,x:-1/0,width:1/0}:r}})).reduce(((e,t)=>e?i.BeamRectHelper.intersection(e,t):t),null)}static getClippingContainers(e,t){return s.getClippingElements(e,t).filter((n=>{const i=s.getOverflowEscapingElement(e,n,t);return!i||i.contains(n)}))}static isLargerThanWindow(e,t){const n=100/t.innerHeight*e.height>110;if(n)return n;return 100/t.innerWidth*e.width>110}}t.BeamElementHelper=s,s.imageElementMatcher=e=>["img","svg"].includes(e.tagName.toLowerCase())},400:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamEmbedHelper=void 0;const i=n(835);t.BeamEmbedHelper=class{constructor(e){this.embedPattern="__EMBEDPATTERN__",this.win=e,this.embedRegex=new RegExp(this.embedPattern,"i"),this.firstLocationLoaded=this.win.location}isEmbeddableElement(e){const t=this.isOnFullEmbeddablePage();if(t)return t;switch(this.win.location.hostname){case"twitter.com":return this.isTweet(e);case"www.youtube.com":return this.isYouTubeThumbnail(e)||this.isEmbeddableIframe(e)||this.win.location.pathname.includes("/embed/");default:return this.isEmbeddableIframe(e)}}getEmbeddableWindowLocation(){const e=[this.win.location.href,this.firstLocationLoaded.href];if((0,i.dequal)(e,this.getEmbeddableWindowLocationLastUrls))return this.getEmbeddableWindowLocationLastResult;const t=e.find((e=>this.embedRegex.test(e)));return this.getEmbeddableWindowLocationLastUrls=e,this.getEmbeddableWindowLocationLastResult=t,t}isOnFullEmbeddablePage(){return this.urlMatchesEmbedProvider([this.win.location.href,this.firstLocationLoaded.href])&&this.isInsideIframe()}isEmbeddableIframe(e){return!!["iframe"].includes(e.tagName.toLowerCase())&&this.urlMatchesEmbedProvider([e.src])}urlMatchesEmbedProvider(e){if((0,i.dequal)(e,this.urlMatchesEmbedProviderLastUrls))return this.urlMatchesEmbedProviderLastResult;const t=e.some((e=>!!e&&(this.embedRegex.test(e)||e.includes("youtube.com/embed"))));return this.urlMatchesEmbedProviderLastUrls=e,this.urlMatchesEmbedProviderLastResult=t,t}isInsideIframe(){try{return window.self!==window.top}catch(e){return!0}}parseElementForEmbed(e){const{hostname:t}=this.win.location;switch(t){case"twitter.com":return this.parseTwitterElementForEmbed(e);case"www.youtube.com":if(this.win.location.pathname.includes("/embed/")){const e=window.location.pathname.split("/").pop();return this.createLinkElement(`https://www.youtube.com/watch?v=${e}`)}return this.parseYouTubeThumbnailForEmbed(e);default:if(e.src&&this.urlMatchesEmbedProvider([e.src]))return this.createLinkElement(e.src)}}parseTwitterElementForEmbed(e){if(!this.isTweet(e))return;const t=e.querySelectorAll('a[href*="/status/"]'),n=null==t?void 0:t[0].href;return n?this.createLinkElement(n):void 0}isTweet(e){return"tweet"==e.getAttribute("data-testid")}isYouTubeThumbnail(e){var t,n;if(Boolean(null===(t=null==e?void 0:e.href)||void 0===t?void 0:t.includes("/watch?v=")))return!0;const i=this.hasParentOfType(e,"A",5);return Boolean(null===(n=null==i?void 0:i.href)||void 0===n?void 0:n.includes("/watch?v="))}hasParentOfType(e,t,n=10){if(n<=0)return null;if("BODY"!==t&&"BODY"===(null==e?void 0:e.tagName))return null;if(!(null==e?void 0:e.parentElement))return null;if(t===(null==e?void 0:e.tagName))return e;const i=n--;return this.hasParentOfType(e.parentElement,t,i)}parseYouTubeThumbnailForEmbed(e){var t,n;if(!this.isYouTubeThumbnail(e))return;if(null===(t=null==e?void 0:e.href)||void 0===t?void 0:t.includes("/watch?v="))return this.createLinkElement(null==e?void 0:e.href);const i=this.hasParentOfType(e,"A",5);return(null===(n=null==i?void 0:i.href)||void 0===n?void 0:n.includes("/watch?v="))?this.createLinkElement(null==i?void 0:i.href):void 0}createLinkElement(e){const t=this.win.document.createElement("a");return t.setAttribute("href",e),t.innerText=e,t}}},917:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamLogger=void 0;const i=n(990);t.BeamLogger=class{constructor(e,t){this.native=new i.Native(e,"beam_logger"),this.category=t}log(...e){const t=this.convertArgsToMessage(e);this.sendMessage(t,i.BeamLogLevel.log)}logWarning(...e){const t=this.convertArgsToMessage(e);this.sendMessage(t,i.BeamLogLevel.warning)}logDebug(...e){const t=this.convertArgsToMessage(e);this.sendMessage(t,i.BeamLogLevel.debug)}logError(...e){const t=this.convertArgsToMessage(e);this.sendMessage(t,i.BeamLogLevel.error)}sendMessage(e,t){this.native.sendMessage("log",{message:e,level:t,category:this.category})}convertArgsToMessage(e){return Object.values(e).map((e=>{let t;if("object"==typeof e)try{t=JSON.stringify(e)}catch(e){}return t||(t=String(e)),t})).map((e=>e.substring(0,3e3))).join(", ")}}},799:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamRectHelper=void 0;t.BeamRectHelper=class{static filterRectArrayByRectArray(e,t){return e.filter((e=>0==this.doRectMatchesRectsInArray(e,t)))}static doRectMatchesRectsInArray(e,t){return t.some((t=>this.doRectsMatch(e,t)))}static doRectsMatch(e,t){return Math.round(null==e?void 0:e.x)==Math.round(null==t?void 0:t.x)&&Math.round(null==e?void 0:e.y)==Math.round(null==t?void 0:t.y)&&Math.round(null==e?void 0:e.height)==Math.round(null==t?void 0:t.height)&&Math.round(null==e?void 0:e.width)==Math.round(null==t?void 0:t.width)}static boundingRect(e,t){const n=Math.min(e.x,t.x),i=Math.min(e.y,t.y);return{x:n,y:i,width:Math.max(e.x+e.width,t.x+t.width)-n,height:Math.max(e.y+e.height,t.y+t.height)-i}}static intersection(e,t){const n=Math.max(e.x,t.x),i=Math.max(e.y,t.y),r=[e.x+e.width,t.x+t.width].filter((e=>!isNaN(e))),s=Math.min(...r),o=[e.y+e.height,t.y+t.height].filter((e=>!isNaN(e))),a=Math.min(...o);if(s>n&&a>i)return{x:n,y:i,width:s-n,height:a-i}}}},446:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointAndShootHelper=void 0;const i=n(990),r=n(646),s=n(400);class o{static isOnlyMarkupChar(e){return 1==e.length&&["•","-","|","–","—","·"].includes(e)}static isTextMeaningful(e){if(e){const t=e.trim();return!!t&&!this.isOnlyMarkupChar(t)}return!1}static isMeaningful(e,t){return(new s.BeamEmbedHelper(t).isEmbeddableElement(e)||r.BeamElementHelper.isMedia(e)||r.BeamElementHelper.isImageContainer(e,t)||o.isTextMeaningful(r.BeamElementHelper.getTextValue(e)))&&r.BeamElementHelper.isVisible(e,t)}static isUselessSiteSpecificElement(e,t){var n;return!(!(null===(n=t.location.hostname)||void 0===n?void 0:n.includes("amazon."))||"magnifierLens"!=e.id)}static isMeaningfulOrChildrenAre(e,t){return!!o.isMeaningful(e,t)||[...e.children].some((e=>o.isMeaningful(e,t)))}static getMeaningfulChildNodes(e,t){return[...e.childNodes].filter((e=>e.nodeType===i.BeamNodeType.element&&o.isMeaningfulOrChildrenAre(e,t)||e.nodeType===i.BeamNodeType.text&&o.isTextMeaningful(e.data)))}static isUselessOrChildrenAre(e,t){return 0==o.isMeaningfulOrChildrenAre(e,t)}static getElementAndTextChildNodesRecursively(e,t){if(!(null==e?void 0:e.childNodes))return[e];const n=[];return[...e.childNodes].forEach((e=>{switch(e.nodeType){case i.BeamNodeType.element:n.push(e);const r=this.getElementAndTextChildNodesRecursively(e,t);n.push(...r);break;case i.BeamNodeType.text:n.push(e)}})),0==n.length?[e]:n}static isOnlyAltKey(e){return(e.altKey||"Alt"==e.key)&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey}static upsertShootGroup(e,t){const n=t.findIndex((({element:t})=>t==e.element));-1!=n?t[n]=e:t.push(e)}static upsertRangeGroup(e,t){const n=t.findIndex((({id:t})=>t==e.id));-1!=n?t[n]=e:t.push(e)}static isExplicitlyContentEditable(e){return["true","plaintext-only"].includes(r.BeamElementHelper.getContentEditable(e))}static getInheritedContentEditable(e){let t=this.isExplicitlyContentEditable(e);const n=e.parentElement;return n&&"inherit"===r.BeamElementHelper.getContentEditable(e)&&(t=this.getInheritedContentEditable(n)),t}static isTargetTextualInput(e){return r.BeamElementHelper.isTextualInputType(e)||this.getInheritedContentEditable(e)}static isEventTargetActive(e,t){return!(!e.document.activeElement||e.document.activeElement===e.document.body||!e.document.activeElement.contains(t))}static isActiveTextualInput(e,t){return this.isEventTargetActive(e,t)&&this.isTargetTextualInput(t)}static hasMouseLocationChanged(e,t,n){return(null==e?void 0:e.x)!==t||(null==e?void 0:e.y)!==n}static hasFocusedTextualInput(e){const t=e.document.activeElement;return!!t&&(r.BeamElementHelper.isTextualInputType(t)||this.getInheritedContentEditable(t))}static isPointDisabled(e,t){return this.isActiveTextualInput(e,t)||this.hasFocusedTextualInput(e)||this.hasSelection(e)}static hasSelection(e){return!e.document.getSelection().isCollapsed&&Boolean(e.document.getSelection().toString())}static getSelectionRanges(e){const t=[],n=e.rangeCount;for(let i=0;i<n;++i){const n=e.getRangeAt(i);t.push(n)}return t}static getSelection(e){return e.document.getSelection()}static getElementAtMouseLocation(e,t){return e.document.elementFromPoint(t.x,t.y)}static getOffset(e,t){e&&(t.x+=e.offsetLeft,t.y+=e.offsetTop,o.getOffset(e.offsetParent,t))}static getScrolled(e,t){e&&(t.x+=e.scrollLeft,t.y+=e.scrollTop,"html"!=e.tagName.toLowerCase()&&o.getScrolled(e.parentNode,t))}static getTopLeft(e){const t={x:0,y:0};o.getOffset(e,t);const n={x:0,y:0};o.getScrolled(e.parentNode,n);return{x:t.x-n.x,y:t.y-n.y}}static clamp(e,t,n){return e>n?n:e<t?t:e}static compact(e){return e.filter((e=>null!=e))}static isNumberInRange(e,t,n){return Number(e)>=Math.min(t,n)&&e<=Math.max(t,n)}static mapRangeToRange(e,t,n){return t[0]+(n-e[0])*(t[1]-t[0])/(e[1]-e[0])}static uuid(e){const t=new Uint32Array(4);return e.crypto.getRandomValues(t).join("-")}static removeFromArray(e,t){const n=t.findIndex(e);return n>=0&&t.splice(n,1),t}}t.PointAndShootHelper=o},653:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointAndShootHelper=t.BeamElementHelper=t.BeamEmbedHelper=t.BeamRectHelper=t.BeamLogger=void 0;const i=n(917);Object.defineProperty(t,"BeamLogger",{enumerable:!0,get:function(){return i.BeamLogger}});const r=n(799);Object.defineProperty(t,"BeamRectHelper",{enumerable:!0,get:function(){return r.BeamRectHelper}});const s=n(400);Object.defineProperty(t,"BeamEmbedHelper",{enumerable:!0,get:function(){return s.BeamEmbedHelper}});const o=n(646);Object.defineProperty(t,"BeamElementHelper",{enumerable:!0,get:function(){return o.BeamElementHelper}});const a=n(446);Object.defineProperty(t,"PointAndShootHelper",{enumerable:!0,get:function(){return a.PointAndShootHelper}})},454:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebPositions=void 0;const r=n(990),s=n(653),o=i(n(509)),a=n(835);t.WebPositions=class{constructor(e,t){this.ui=t,this.touchDuration=2500,this.framesInfo=[],this.debouncedFrameInfoLeading=(0,o.default)(this.sendFramesInfo.bind(this),200,!0),this.debouncedFrameInfoTrailling=(0,o.default)(this.sendFramesInfo.bind(this),200,!1),this.win=e,this.logger=new s.BeamLogger(e,r.BeamLogCategory.webpositions),this.onScroll(),this.registerEventListeners(),this.createFrameMutationObserver(),this.createZoomMutationObserver("body",this.zoomMutationCallback.bind(this))}registerEventListeners(){this.win.addEventListener("load",this.onLoad.bind(this)),this.win.addEventListener("beam_historyLoad",this.onLoad.bind(this)),this.win.addEventListener("scroll",this.onScroll.bind(this),!0),this.win.addEventListener("resize",this.onResize.bind(this),!0),this.win.addEventListener("keydown",this.onKeyDown.bind(this))}createZoomMutationObserver(e,t){const n=this;this.bodyZoomMutationObserver=this.createMutationObserver((e=>t(e,n)));const i=this.win.document.querySelector(e);this.bodyZoomMutationObserver.observe(i,{attributes:!0,attributeFilter:["style"]})}createMutationObserver(e){return new MutationObserver(e)}zoomMutationCallback(e,t){e.map((e=>{if("style"==e.attributeName){const e=this.resizeInfo();this.ui.setResizeInfo(e)}}))}createFrameMutationObserver(){this.createMutationObserver(this.frameMutationCallback.bind(this)).observe(this.win.document,{childList:!0,subtree:!0,attributes:!0})}frameMutationCallback(e,t){e.map((e=>{"IFRAME"==e.target.nodeName&&this.debouncedFrameInfoTrailling();for(const t of e.removedNodes)"IFRAME"==t.nodeName&&this.debouncedFrameInfoTrailling();for(const t of e.addedNodes)"IFRAME"==t.nodeName&&this.debouncedFrameInfoTrailling()}))}onKeyDown(e){(e.altKey||"Alt"==e.key)&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&this.debouncedFrameInfoTrailling()}sendFramesInfo(e=!0){const t=this.win.document.querySelectorAll("iframe"),n=[];for(const e of t){const t=e.getBoundingClientRect(),i={href:e.src,bounds:{x:t.x,y:t.y,width:t.width,height:t.height}};n.push(i)}if(e){const e=this.getMainFrameScrollSizing();n.push({href:this.win.location.href,bounds:{x:0,y:0,width:this.win.innerWidth,height:this.win.innerHeight},scrollSize:e})}(0,a.dequal)(n,this.framesInfo)||(this.framesInfo=n,this.ui.setFramesInfo(n))}getMainFrameScrollSizing(){const e=this.win.document,t=e.body,n=e.documentElement;return{width:Math.max(t.scrollWidth,n.scrollWidth,t.offsetWidth,n.offsetWidth,t.clientWidth,n.clientWidth),height:Math.max(t.scrollHeight,n.scrollHeight,t.offsetHeight,n.offsetHeight,t.clientHeight,n.clientHeight)}}onScroll(e){const t={x:this.win.scrollX,y:this.win.scrollY};this.ui.setScrollInfo(t),this.debouncedFrameInfoLeading()}onResize(e){const t=this.resizeInfo();this.ui.setResizeInfo(t),this.debouncedFrameInfoTrailling()}resizeInfo(){return{width:this.win.innerWidth,height:this.win.innerHeight}}onLoad(e){this.onScroll(),this.debouncedFrameInfoTrailling()}toString(){return this.constructor.name}}},52:(e,t,n)=>{"use strict";t.W=void 0;const i=n(990),r=n(653);class s{constructor(e){this.native=e,this.logger=new r.BeamLogger(e.win,i.BeamLogCategory.webpositions)}static getInstance(e){let t;try{const n=i.Native.getInstance(e,"webPositions");t=new s(n)}catch(e){t=null}return t}setFramesInfo(e){this.native.sendMessage("frameBounds",{frames:e})}setScrollInfo(e){this.native.sendMessage("scroll",e)}setResizeInfo(e){this.native.sendMessage("resize",e)}setOnLoadInfo(e){this.native.sendMessage("onLoad",{frames:e})}pinched(e){this.native.sendMessage("pinch",e)}toString(){return this.constructor.name}}t.W=s}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(990),t=n(454),i=n(52);const r=e.Native.getInstance(window,"WebPositions"),s=new i.W(r);window.beam||(window.beam={}),window.beam.__ID__WebPositions=new t.WebPositions(window,s)})()})();