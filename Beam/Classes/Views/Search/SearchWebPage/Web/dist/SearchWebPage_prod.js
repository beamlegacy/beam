(()=>{var e={908:(e,t)=>{var n=Object.prototype.hasOwnProperty;function i(e,t,n){for(n of e.keys())if(r(n,t))return n}function r(e,t){var s,o,a;if(e===t)return!0;if(e&&t&&(s=e.constructor)===t.constructor){if(s===Date)return e.getTime()===t.getTime();if(s===RegExp)return e.toString()===t.toString();if(s===Array){if((o=e.length)===t.length)for(;o--&&r(e[o],t[o]););return-1===o}if(s===Set){if(e.size!==t.size)return!1;for(o of e){if((a=o)&&"object"==typeof a&&!(a=i(t,a)))return!1;if(!t.has(a))return!1}return!0}if(s===Map){if(e.size!==t.size)return!1;for(o of e){if((a=o[0])&&"object"==typeof a&&!(a=i(t,a)))return!1;if(!r(o[1],t.get(a)))return!1}return!0}if(s===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(s===DataView){if((o=e.byteLength)===t.byteLength)for(;o--&&e.getInt8(o)===t.getInt8(o););return-1===o}if(ArrayBuffer.isView(e)){if((o=e.byteLength)===t.byteLength)for(;o--&&e[o]===t[o];);return-1===o}if(!s||"object"==typeof e){for(s in o=0,e){if(n.call(e,s)&&++o&&!n.call(t,s))return!1;if(!(s in t)||!r(e[s],t[s]))return!1}return Object.keys(t).length===o}}return e!=e&&t!=t}t.dequal=r},492:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamDOMRectList=void 0;class n{constructor(e){this.list=e}get length(){return this.list.length}[Symbol.iterator](){return this.list.values()}item(e){return this.list[e]}}t.BeamDOMRectList=n},235:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamKeyEvent=void 0;const i=n(284);class r extends i.BeamMouseEvent{constructor(e={}){super(),Object.assign(this,e)}}t.BeamKeyEvent=r},284:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamMouseEvent=void 0;const i=n(479);class r extends i.BeamUIEvent{constructor(e={}){super(),Object.assign(this,e)}}t.BeamMouseEvent=r},157:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamNamedNodeMap=void 0;class n extends Object{constructor(e={}){super(),this.attrs=[];for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n={ATTRIBUTE_NODE:0,CDATA_SECTION_NODE:0,COMMENT_NODE:0,DOCUMENT_FRAGMENT_NODE:0,DOCUMENT_NODE:0,DOCUMENT_POSITION_CONTAINED_BY:0,DOCUMENT_POSITION_CONTAINS:0,DOCUMENT_POSITION_DISCONNECTED:0,DOCUMENT_POSITION_FOLLOWING:0,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:0,DOCUMENT_POSITION_PRECEDING:0,DOCUMENT_TYPE_NODE:0,ELEMENT_NODE:0,ENTITY_NODE:0,ENTITY_REFERENCE_NODE:0,NOTATION_NODE:0,PROCESSING_INSTRUCTION_NODE:0,TEXT_NODE:0,addEventListener(e,t,n){},appendChild(e){},baseURI:"",childNodes:void 0,cloneNode(e){},compareDocumentPosition:e=>0,contains:e=>!1,dispatchEvent:e=>!1,firstChild:void 0,getRootNode(e){},hasChildNodes:()=>!1,insertBefore(e,t){},isConnected:!1,isDefaultNamespace:e=>!1,isEqualNode:e=>!1,isSameNode:e=>!1,lastChild:void 0,lookupNamespaceURI(e){},lookupPrefix(e){},namespaceURI:void 0,nextSibling:void 0,nodeName:"",nodeType:0,nodeValue:void 0,ownerDocument:void 0,ownerElement:void 0,parentElement:void 0,parentNode:void 0,prefix:void 0,previousSibling:void 0,removeChild(e){},removeEventListener(e,t,n){},replaceChild(e,t){},specified:!1,textContent:void 0,normalize(){},name:t,localName:t,value:e[t]};this.setNamedItem(n)}}get length(){return this.attrs.length}getNamedItem(e){return this.attrs.find((t=>t.localName===e))}getNamedItemNS(e,t){return this.getNamedItem(`${e}.${t}`)}item(e){return this.attrs[e]}removeNamedItem(e){const t=this.getNamedItem(e),n=this.attrs.indexOf(t);return this.attrs.splice(n,1),t}removeNamedItemNS(e,t){return this.removeNamedItem(e+"."+t)}setNamedItem(e){const t=this.getNamedItem(e.localName);return t&&this.removeNamedItem(e.localName),this.attrs.push(e),t}setNamedItemNS(e){}[Symbol.iterator](){return this.attrs.values()}toString(){return this.attrs.map((e=>`${e.name}="${e.value}"`)).join(" ")}}t.BeamNamedNodeMap=n},708:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamHTMLCollection=t.BeamLogCategory=t.BeamLogLevel=t.FrameInfo=t.BeamResizeObserver=t.BeamMutationObserver=t.BeamWebkitPresentationMode=t.BeamNodeType=t.NoteInfo=t.BeamRect=t.MediaPlayState=t.BeamSize=void 0;class n{constructor(e,t){this.width=e,this.height=t}}t.BeamSize=n,function(e){e.ready="ready",e.playing="playing",e.paused="paused",e.ended="ended"}(t.MediaPlayState||(t.MediaPlayState={}));t.BeamRect=class extends n{constructor(e,t,n,i){super(n,i),this.x=e,this.y=t}};t.NoteInfo=class{},function(e){e[e.element=1]="element",e[e.text=3]="text",e[e.processing_instruction=7]="processing_instruction",e[e.comment=8]="comment",e[e.document=9]="document",e[e.document_type=10]="document_type",e[e.document_fragment=11]="document_fragment"}(t.BeamNodeType||(t.BeamNodeType={})),function(e){e.inline="inline",e.fullscreen="fullscreen",e.pip="picture-in-picture"}(t.BeamWebkitPresentationMode||(t.BeamWebkitPresentationMode={}));t.BeamMutationObserver=class{constructor(e){this.fn=e,new e}disconnect(){throw new Error("Method not implemented.")}observe(e,t){throw new Error("Method not implemented.")}takeRecords(){throw new Error("Method not implemented.")}};t.BeamResizeObserver=class{constructor(){}disconnect(){throw new Error("Method not implemented.")}observe(e,t){throw new Error("Method not implemented.")}unobserve(e){throw new Error("Method not implemented.")}};t.FrameInfo=class{},function(e){e.log="log",e.warning="warning",e.error="error",e.debug="debug"}(t.BeamLogLevel||(t.BeamLogLevel={})),function(e){e.general="general",e.pointAndShoot="pointAndShoot",e.embedNode="embedNode",e.webpositions="webpositions",e.navigation="navigation",e.native="native",e.passwordManager="passwordManager",e.webAutofillInternal="webAutofillInternal"}(t.BeamLogCategory||(t.BeamLogCategory={}));class i{constructor(e){this.values=e}get length(){return this.values.length}[Symbol.iterator](){return this.values.values()}item(e){return this.values[e]}namedItem(e){return this.item(parseInt(e,10))}}t.BeamHTMLCollection=i},479:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamUIEvent=void 0;t.BeamUIEvent=class{preventDefault(){}stopPropagation(){}}},568:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Native=void 0;class n{constructor(e,t){if(this.win=e,this.href=e.location.href,this.componentPrefix=t,this.messageHandlers=e.webkit&&e.webkit.messageHandlers,!this.messageHandlers)throw Error("Could not find webkit message handlers")}static getInstance(e,t){return n.instance||(n.instance=new n(e,t)),n.instance}sendMessage(e,t){const n=`${this.componentPrefix}_${e}`,i=this.messageHandlers[n];if(!i)throw Error(`No message handler for message "${n}"`);{const e=this.win.location.href;i.postMessage(Object.assign({href:e},t),e)}}toString(){return this.constructor.name}}t.Native=n},528:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(708),t),r(n(235),t),r(n(284),t),r(n(568),t),r(n(157),t),r(n(479),t),r(n(492),t)},709:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamElementHelper=void 0;const i=n(254),r=n(620);class s{static getAttribute(e,t){const n=t.attributes.getNamedItem(e);return null==n?void 0:n.value}static getType(e){return s.getAttribute("type",e)}static getContentEditable(e){return s.getAttribute("contenteditable",e)||"inherit"}static isTextualInputType(e){const t=e.tagName.toLowerCase();if("textarea"===t)return!0;if("input"===t){return["text","email","password","date","datetime-local","month","number","search","tel","time","url","week","datetime"].includes(e.type)}return!1}static getTextValue(e){let t;switch(e.tagName.toLowerCase()){case"input":{const n=e;s.isTextualInputType(n)&&(t=n.value)}break;case"textarea":t=e.value;break;default:t=e.innerText}return t}static getBackgroundImageURL(e,t){var n;const i=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e),r=null==i?void 0:i.backgroundImage.match(/url\(([^)]+)/);if(r&&r.length>1)return r[1].replace(/('|")/g,"")}static hasParentOfType(e,t,n=10){if(n<=0)return null;if("BODY"!==t&&"BODY"===(null==e?void 0:e.tagName))return null;if(!(null==e?void 0:e.parentElement))return null;if(t===(null==e?void 0:e.tagName))return e;const i=n--;return s.hasParentOfType(e.parentElement,t,i)}static parseElementBasedOnStyles(e,t){const n=new r.BeamEmbedHelper(t);if(n.isEmbeddableElement(e)){const t=n.parseElementForEmbed(e);if(t)return t}return e}static isVisible(e,t){var n;let i=!1;if(e){i=!0;const r=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e);if(r&&(i=!("none"===r.getPropertyValue("display")||["hidden","collapse"].includes(r.getPropertyValue("visibility"))||"1px"===r.getPropertyValue("width")&&"1px"===r.getPropertyValue("height")||["0px","0"].includes(r.getPropertyValue("width"))||["0px","0"].includes(r.getPropertyValue("height"))||"absolute"===r.getPropertyValue("position")&&r.getPropertyValue("clip").match(/rect\((0(px)?[, ]+){3}0px\)/)||r.getPropertyValue("clip-path").match(/inset\(([5-9]\d|100)%\)/))),i){const t=e.getBoundingClientRect();i=t.width>0&&t.height>0}}return i}static isMedia(e){return["video","audio"].includes(e.tagName.toLowerCase())||Boolean(e.querySelectorAll("video, audio").length)}static isImageOrContainsImageChild(e,t){return s.isImage(e,t,(e=>["img","svg"].includes(e.tagName.toLowerCase())||Boolean(e.querySelectorAll("img, svg").length)))}static isImage(e,t,n=s.imageElementMatcher){var i;if(n(e))return!0;const r=null===(i=t.getComputedStyle)||void 0===i?void 0:i.call(t,e);return!!(null==r?void 0:r.backgroundImage.match(/url\(([^)]+)/))}static isImageContainer(e,t){return!!s.isImage(e,t)||e.children.length>0&&[...e.children].every((e=>s.isImageContainer(e,t)))}static getSvgRoot(e){if(!["body","html"].includes(e.tagName.toLowerCase()))return"svg"===e.tagName.toLowerCase()?e:e.parentElement?s.getSvgRoot(e.parentElement):void 0}static getPositionedElement(e,t){var n;if(!e||e===t.document.body)return;const i=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e);return e.parentElement&&"static"===(null==i?void 0:i.position)?s.getPositionedElement(e.parentElement,t):"static"!==(null==i?void 0:i.position)?e:void 0}static getOverflowEscapingElement(e,t,n){var i;if(!e||e===n.document.body)return;const r=null===(i=n.getComputedStyle)||void 0===i?void 0:i.call(n,e);if(r)switch(r.position){case"absolute":{const i=s.getPositionedElement(e.parentElement,n);return i&&i.contains(t),e}case"fixed":return e;default:return s.getOverflowEscapingElement(e.parentElement,t,n)}}static getClippingElement(e,t){var n;if(e===t.document.body)return;const i=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e);if(i){if("visible"!==i.getPropertyValue("overflow")||"visible"!==i.getPropertyValue("overflow-x")||"visible"!==i.getPropertyValue("overflow-y")||"auto"!==i.getPropertyValue("clip")||"none"!==i.getPropertyValue("clip-path"))return e;if(e.parentElement)return s.getClippingElement(e.parentElement,t)}else if(e.parentElement)return s.getClippingElement(e.parentElement,t)}static getClippingElements(e,t){const n=s.getClippingElement(e,t);return n?n.parentElement&&n.parentElement!==t.document.body?[n,...s.getClippingElements(n.parentElement,t)]:[n]:[]}static getClippingArea(e,t){return e.map((e=>{var n;const i=null===(n=t.getComputedStyle)||void 0===n?void 0:n.call(t,e);if(i){const t="visible"!==i.getPropertyValue("overflow-x"),n="visible"!==i.getPropertyValue("overflow-y"),r=e.getBoundingClientRect();return t&&!n?{x:r.x,width:r.width,y:-1/0,height:1/0}:n&&!t?{y:r.y,height:r.height,x:-1/0,width:1/0}:r}})).reduce(((e,t)=>e?i.BeamRectHelper.intersection(e,t):t),null)}static getClippingContainers(e,t){return s.getClippingElements(e,t).filter((n=>{const i=s.getOverflowEscapingElement(e,n,t);return!i||i.contains(n)}))}static isLargerThanWindow(e,t){const n=100/t.innerHeight*e.height>110;if(n)return n;return 100/t.innerWidth*e.width>110}}t.BeamElementHelper=s,s.imageElementMatcher=e=>["img","svg"].includes(e.tagName.toLowerCase())},620:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamEmbedHelper=void 0;const i=n(908);t.BeamEmbedHelper=class{constructor(e){this.embedPattern="__EMBEDPATTERN__",this.win=e,this.embedRegex=new RegExp(this.embedPattern,"i"),this.firstLocationLoaded=this.win.location}isEmbeddableElement(e){const t=this.isOnFullEmbeddablePage();if(t)return t;switch(this.win.location.hostname){case"twitter.com":return this.isTweet(e);case"www.youtube.com":return this.isYouTubeThumbnail(e)||this.isEmbeddableIframe(e)||this.win.location.pathname.includes("/embed/");default:return this.isEmbeddableIframe(e)}}getEmbeddableWindowLocation(){const e=[this.win.location.href,this.firstLocationLoaded.href];if((0,i.dequal)(e,this.getEmbeddableWindowLocationLastUrls))return this.getEmbeddableWindowLocationLastResult;const t=e.find((e=>this.embedRegex.test(e)));return this.getEmbeddableWindowLocationLastUrls=e,this.getEmbeddableWindowLocationLastResult=t,t}isOnFullEmbeddablePage(){return this.urlMatchesEmbedProvider([this.win.location.href,this.firstLocationLoaded.href])&&this.isInsideIframe()}isEmbeddableIframe(e){return!!["iframe"].includes(e.tagName.toLowerCase())&&this.urlMatchesEmbedProvider([e.src])}urlMatchesEmbedProvider(e){if((0,i.dequal)(e,this.urlMatchesEmbedProviderLastUrls))return this.urlMatchesEmbedProviderLastResult;const t=e.some((e=>!!e&&(this.embedRegex.test(e)||e.includes("youtube.com/embed"))));return this.urlMatchesEmbedProviderLastUrls=e,this.urlMatchesEmbedProviderLastResult=t,t}isInsideIframe(){try{return window.self!==window.top}catch(e){return!0}}parseElementForEmbed(e){const{hostname:t}=this.win.location;switch(t){case"twitter.com":return this.parseTwitterElementForEmbed(e);case"www.youtube.com":if(this.win.location.pathname.includes("/embed/")){const e=window.location.pathname.split("/").pop();return this.createLinkElement(`https://www.youtube.com/watch?v=${e}`)}return this.parseYouTubeThumbnailForEmbed(e);default:if(e.src&&this.urlMatchesEmbedProvider([e.src]))return this.createLinkElement(e.src)}}parseTwitterElementForEmbed(e){if(!this.isTweet(e))return;const t=e.querySelectorAll('a[href*="/status/"]'),n=null==t?void 0:t[0].href;return n?this.createLinkElement(n):void 0}isTweet(e){return"tweet"==e.getAttribute("data-testid")}isYouTubeThumbnail(e){var t,n;if(Boolean(null===(t=null==e?void 0:e.href)||void 0===t?void 0:t.includes("/watch?v=")))return!0;const i=this.hasParentOfType(e,"A",5);return Boolean(null===(n=null==i?void 0:i.href)||void 0===n?void 0:n.includes("/watch?v="))}hasParentOfType(e,t,n=10){if(n<=0)return null;if("BODY"!==t&&"BODY"===(null==e?void 0:e.tagName))return null;if(!(null==e?void 0:e.parentElement))return null;if(t===(null==e?void 0:e.tagName))return e;const i=n--;return this.hasParentOfType(e.parentElement,t,i)}parseYouTubeThumbnailForEmbed(e){var t,n;if(!this.isYouTubeThumbnail(e))return;if(null===(t=null==e?void 0:e.href)||void 0===t?void 0:t.includes("/watch?v="))return this.createLinkElement(null==e?void 0:e.href);const i=this.hasParentOfType(e,"A",5);return(null===(n=null==i?void 0:i.href)||void 0===n?void 0:n.includes("/watch?v="))?this.createLinkElement(null==i?void 0:i.href):void 0}createLinkElement(e){const t=this.win.document.createElement("a");return t.setAttribute("href",e),t.innerText=e,t}}},440:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamLogger=void 0;const i=n(528);t.BeamLogger=class{constructor(e,t){this.native=new i.Native(e,"beam_logger"),this.category=t}log(...e){const t=this.convertArgsToMessage(e);this.sendMessage(t,i.BeamLogLevel.log)}logWarning(...e){const t=this.convertArgsToMessage(e);this.sendMessage(t,i.BeamLogLevel.warning)}logDebug(...e){const t=this.convertArgsToMessage(e);this.sendMessage(t,i.BeamLogLevel.debug)}logError(...e){const t=this.convertArgsToMessage(e);this.sendMessage(t,i.BeamLogLevel.error)}sendMessage(e,t){this.native.sendMessage("log",{message:e,level:t,category:this.category})}convertArgsToMessage(e){return Object.values(e).map((e=>{let t;if("object"==typeof e)try{t=JSON.stringify(e)}catch(e){}return t||(t=String(e)),t})).map((e=>e.substring(0,3e3))).join(", ")}}},254:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeamRectHelper=void 0;t.BeamRectHelper=class{static filterRectArrayByRectArray(e,t){return e.filter((e=>0==this.doRectMatchesRectsInArray(e,t)))}static doRectMatchesRectsInArray(e,t){return t.some((t=>this.doRectsMatch(e,t)))}static doRectsMatch(e,t){return Math.round(null==e?void 0:e.x)==Math.round(null==t?void 0:t.x)&&Math.round(null==e?void 0:e.y)==Math.round(null==t?void 0:t.y)&&Math.round(null==e?void 0:e.height)==Math.round(null==t?void 0:t.height)&&Math.round(null==e?void 0:e.width)==Math.round(null==t?void 0:t.width)}static boundingRect(e,t){const n=Math.min(e.x,t.x),i=Math.min(e.y,t.y);return{x:n,y:i,width:Math.max(e.x+e.width,t.x+t.width)-n,height:Math.max(e.y+e.height,t.y+t.height)-i}}static intersection(e,t){const n=Math.max(e.x,t.x),i=Math.max(e.y,t.y),r=[e.x+e.width,t.x+t.width].filter((e=>!isNaN(e))),s=Math.min(...r),o=[e.y+e.height,t.y+t.height].filter((e=>!isNaN(e))),a=Math.min(...o);if(s>n&&a>i)return{x:n,y:i,width:s-n,height:a-i}}}},70:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointAndShootHelper=void 0;const i=n(528),r=n(709),s=n(620);class o{static isOnlyMarkupChar(e){return 1==e.length&&["•","-","|","–","—","·"].includes(e)}static isTextMeaningful(e){if(e){const t=e.trim();return!!t&&!this.isOnlyMarkupChar(t)}return!1}static isMeaningful(e,t){return(new s.BeamEmbedHelper(t).isEmbeddableElement(e)||r.BeamElementHelper.isMedia(e)||r.BeamElementHelper.isImageContainer(e,t)||o.isTextMeaningful(r.BeamElementHelper.getTextValue(e)))&&r.BeamElementHelper.isVisible(e,t)}static isUselessSiteSpecificElement(e,t){var n;return!(!(null===(n=t.location.hostname)||void 0===n?void 0:n.includes("amazon."))||"magnifierLens"!=e.id)}static isMeaningfulOrChildrenAre(e,t){return!!o.isMeaningful(e,t)||[...e.children].some((e=>o.isMeaningful(e,t)))}static getMeaningfulChildNodes(e,t){return[...e.childNodes].filter((e=>e.nodeType===i.BeamNodeType.element&&o.isMeaningfulOrChildrenAre(e,t)||e.nodeType===i.BeamNodeType.text&&o.isTextMeaningful(e.data)))}static isUselessOrChildrenAre(e,t){return 0==o.isMeaningfulOrChildrenAre(e,t)}static getElementAndTextChildNodesRecursively(e,t){if(!(null==e?void 0:e.childNodes))return[e];const n=[];return[...e.childNodes].forEach((e=>{switch(e.nodeType){case i.BeamNodeType.element:n.push(e);const r=this.getElementAndTextChildNodesRecursively(e,t);n.push(...r);break;case i.BeamNodeType.text:n.push(e)}})),0==n.length?[e]:n}static isOnlyAltKey(e){return(e.altKey||"Alt"==e.key)&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey}static upsertShootGroup(e,t){const n=t.findIndex((({element:t})=>t==e.element));-1!=n?t[n]=e:t.push(e)}static upsertRangeGroup(e,t){const n=t.findIndex((({id:t})=>t==e.id));-1!=n?t[n]=e:t.push(e)}static isExplicitlyContentEditable(e){return["true","plaintext-only"].includes(r.BeamElementHelper.getContentEditable(e))}static getInheritedContentEditable(e){let t=this.isExplicitlyContentEditable(e);const n=e.parentElement;return n&&"inherit"===r.BeamElementHelper.getContentEditable(e)&&(t=this.getInheritedContentEditable(n)),t}static isTargetTextualInput(e){return r.BeamElementHelper.isTextualInputType(e)||this.getInheritedContentEditable(e)}static isEventTargetActive(e,t){return!(!e.document.activeElement||e.document.activeElement===e.document.body||!e.document.activeElement.contains(t))}static isActiveTextualInput(e,t){return this.isEventTargetActive(e,t)&&this.isTargetTextualInput(t)}static hasMouseLocationChanged(e,t,n){return(null==e?void 0:e.x)!==t||(null==e?void 0:e.y)!==n}static hasFocusedTextualInput(e){const t=e.document.activeElement;return!!t&&(r.BeamElementHelper.isTextualInputType(t)||this.getInheritedContentEditable(t))}static isPointDisabled(e,t){return this.isActiveTextualInput(e,t)||this.hasFocusedTextualInput(e)||this.hasSelection(e)}static hasSelection(e){return!e.document.getSelection().isCollapsed&&Boolean(e.document.getSelection().toString())}static getSelectionRanges(e){const t=[],n=e.rangeCount;for(let i=0;i<n;++i){const n=e.getRangeAt(i);t.push(n)}return t}static getSelection(e){return e.document.getSelection()}static getElementAtMouseLocation(e,t){return e.document.elementFromPoint(t.x,t.y)}static getOffset(e,t){e&&(t.x+=e.offsetLeft,t.y+=e.offsetTop,o.getOffset(e.offsetParent,t))}static getScrolled(e,t){e&&(t.x+=e.scrollLeft,t.y+=e.scrollTop,"html"!=e.tagName.toLowerCase()&&o.getScrolled(e.parentNode,t))}static getTopLeft(e){const t={x:0,y:0};o.getOffset(e,t);const n={x:0,y:0};o.getScrolled(e.parentNode,n);return{x:t.x-n.x,y:t.y-n.y}}static clamp(e,t,n){return e>n?n:e<t?t:e}static compact(e){return e.filter((e=>null!=e))}static isNumberInRange(e,t,n){return Number(e)>=Math.min(t,n)&&e<=Math.max(t,n)}static mapRangeToRange(e,t,n){return t[0]+(n-e[0])*(t[1]-t[0])/(e[1]-e[0])}static uuid(e){const t=new Uint32Array(4);return e.crypto.getRandomValues(t).join("-")}static removeFromArray(e,t){const n=t.findIndex(e);return n>=0&&t.splice(n,1),t}}t.PointAndShootHelper=o},629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointAndShootHelper=t.BeamElementHelper=t.BeamEmbedHelper=t.BeamRectHelper=t.BeamLogger=void 0;const i=n(440);Object.defineProperty(t,"BeamLogger",{enumerable:!0,get:function(){return i.BeamLogger}});const r=n(254);Object.defineProperty(t,"BeamRectHelper",{enumerable:!0,get:function(){return r.BeamRectHelper}});const s=n(620);Object.defineProperty(t,"BeamEmbedHelper",{enumerable:!0,get:function(){return s.BeamEmbedHelper}});const o=n(709);Object.defineProperty(t,"BeamElementHelper",{enumerable:!0,get:function(){return o.BeamElementHelper}});const a=n(70);Object.defineProperty(t,"PointAndShootHelper",{enumerable:!0,get:function(){return a.PointAndShootHelper}})},81:(e,t,n)=>{"use strict";t.c=void 0;const i=n(528),r=n(629);class s{constructor(){this.cancelled=!1,this.completed=!1}cancel(){this.cancelled=!0,this.onCancelled()}complete(){this.completed=!0,this.cancelled||this.onCompleted()}}t.c=class{constructor(e,t){this.ui=t,this.lastEscapedQuery="",this.lastFindOperation=null,this.lastReplacements=null,this.lastHighlights=null,this.activeHighlightIndex=-1,this.height=1,this.highlightSpan=null,this.styleElement=null,this.constants={MAXIMUM_HIGHLIGHT_COUNT:999,SCROLL_OFFSET_Y:40,HIGHLIGHT_CLASS_NAME:"__ID__find-highlight",HIGHLIGHT_CLASS_NAME_ACTIVE:"__ID__find-highlight-active",RESULT_CLASS_NAME:"__ID__find-result",HIGHLIGHT_COLOR:"rgba(255, 214, 0, 0.6)",HIGHLIGHT_COLOR_ACTIVE:"rgba(255, 153, 0, 0.8)",BUMP_ANIMATION_NAME:"__ID__bump"},this.win=e,this.logger=new r.BeamLogger(e,i.BeamLogCategory.embedNode),this.registerEventListeners()}registerEventListeners(){this.win.addEventListener("load",this.onLoad.bind(this))}onLoad(){this.setupElements()}buildCSS(){return`\n      @keyframes ${this.constants.BUMP_ANIMATION_NAME} {\n        0% {\n          transform: scale(1);\n        }\n\n        100% {\n          transform: scale(1.3);\n        }\n      }\n\n      .${this.constants.HIGHLIGHT_CLASS_NAME} {\n        color: #000 !important;\n        display: inline-block;\n        position: relative;\n      }\n\n      .${this.constants.HIGHLIGHT_CLASS_NAME} > span {\n        background-color: transparent !important;\n        position: relative;\n      }\n\n      .${this.constants.HIGHLIGHT_CLASS_NAME}::before {\n        background-color: ${this.constants.HIGHLIGHT_COLOR};\n        border-radius: 3px;\n        bottom: 0;\n        content: "";\n        left: -2px;\n        position: absolute;\n        right: -2px;\n        top: 0;\n        transform-origin: center center;\n        transition: all 0.2s ease;\n      }\n\n      .${this.constants.HIGHLIGHT_CLASS_NAME}.${this.constants.HIGHLIGHT_CLASS_NAME_ACTIVE}::before {\n        animation:\n          ${this.constants.BUMP_ANIMATION_NAME} 200ms cubic-bezier(0.42, 0, 1, 1) both,\n          ${this.constants.BUMP_ANIMATION_NAME} 70ms cubic-bezier(0, 0, 0.58, 1) 200ms forwards reverse\n        ;\n        background-color: ${this.constants.HIGHLIGHT_COLOR_ACTIVE};\n      }`}setupElements(){this.styleElement=this.win.document.createElement("style"),this.styleElement.innerHTML=this.buildCSS(),this.highlightSpan=this.win.document.createElement("span"),this.highlightSpan.className=this.constants.HIGHLIGHT_CLASS_NAME}find(e){const t=e.trim(),n=t?e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"):t;if(n===this.lastEscapedQuery)return;this.lastFindOperation&&this.lastFindOperation.cancel(),this.clear();const i=this.win.document.body,r=this.win.document.documentElement;if(this.height=Math.max(i.scrollHeight,i.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight),this.lastEscapedQuery=n,!n)return void this.ui.webPageSearch({currentResult:0,totalResults:0,positions:[],height:this.height,incompleteSearch:!1});const s=new RegExp("("+n+")","gi");this.lastFindOperation=this.getMatchingNodeReplacements(s,((e,t,n)=>{let i;for(let t=0,n=e.length;t<n;t++)i=e[t],i.originalNode.replaceWith(i.replacementFragment);const r=[];for(let e=0,n=t.length;e<n;e++){const n=t[e].getBoundingClientRect();r.push(n.top+this.win.scrollY)}this.lastFindOperation=null,this.lastReplacements=e,this.lastHighlights=t,this.activeHighlightIndex=-1;const s=t.length;this.ui.webPageSearch({totalResults:s,positions:r,height:this.height,incompleteSearch:n}),this.findNext()}))}findNext(){this.lastHighlights&&(this.activeHighlightIndex=(this.activeHighlightIndex+this.lastHighlights.length+1)%this.lastHighlights.length,this.updateActiveHighlight())}findPrevious(){this.lastHighlights&&(this.activeHighlightIndex=(this.activeHighlightIndex+this.lastHighlights.length-1)%this.lastHighlights.length,this.updateActiveHighlight())}findDone(){this.styleElement.remove(),this.clear(),this.lastEscapedQuery=""}clear(){if(!this.lastHighlights)return;this.lastReplacements;const e=this.lastHighlights;let t;for(let n=0,i=e.length;n<i;n++)t=e[n],this.removeHighlight(t);this.lastReplacements=null,this.lastHighlights=null,this.activeHighlightIndex=-1}updateActiveHighlight(){this.styleElement.parentNode||this.win.document.body.appendChild(this.styleElement);const e=this.win.document.querySelector("."+this.constants.HIGHLIGHT_CLASS_NAME_ACTIVE);if(e&&e.classList.remove(this.constants.HIGHLIGHT_CLASS_NAME_ACTIVE),!this.lastHighlights)return;const t=this.lastHighlights[this.activeHighlightIndex];if(t){this.jumpToElement(t);const e=t.getBoundingClientRect().top+this.win.scrollY;t.classList.add(this.constants.HIGHLIGHT_CLASS_NAME,this.constants.HIGHLIGHT_CLASS_NAME_ACTIVE),this.ui.webPageSearch({currentResult:this.activeHighlightIndex,currentSelected:e,height:this.height})}else this.ui.webPageSearch({currentResult:0})}removeHighlight(e){const t=e.parentNode;if(t){for(;e.firstChild.firstChild;)t.insertBefore(e.firstChild.firstChild,e);e.remove(),t.normalize()}}chunkedLoop(e,t,n){return new Promise(((i,r)=>{setTimeout((function r(){let s;for(let r=0;r<n;r++)if(s=e(),!s||!1===t(s))return void i(null);setTimeout(r,0)}),0)}))}asyncTextNodeWalker(e){const t=new s,n=this.win.document.createTreeWalker(this.win.document.body,NodeFilter.SHOW_TEXT,null,!1),i=setTimeout((()=>{this.chunkedLoop((()=>n.nextNode()),(n=>!t.cancelled&&(e(n),!0)),100).then((()=>{t.complete()}))}),50);return t.onCancelled=()=>{clearTimeout(i)},t}getMatchingNodeReplacements(e,t){const n=[],i=[];let r=!1;const s=this.asyncTextNodeWalker((o=>{if(!this.isTextNodeVisible(o)||"IFRAME"===o.parentElement.nodeName)return;const a=o.textContent;let l=0;const c=this.win.document.createDocumentFragment();let u,d=!1;for(;u=e.exec(a);){const t=u[0];if(u.index>0){const e=a.substring(l,u.index);c.appendChild(this.win.document.createTextNode(e))}const n=this.highlightSpan.cloneNode(!1),s=this.win.document.createElement("span");if(n.appendChild(s),s.textContent=t,c.appendChild(n),i.push(n),l=e.lastIndex,d=!0,i.length>this.constants.MAXIMUM_HIGHLIGHT_COUNT){r=!0;break}}if(d){if(l<a.length){const e=a.substring(l,a.length);c.appendChild(this.win.document.createTextNode(e))}n.push({originalNode:o,replacementFragment:c})}r&&(s.cancel(),t(n,i,r))}));return s.onCompleted=()=>{t(n,i,r)},s}jumpToElement(e){const t=e.getBoundingClientRect(),n=this.clamp(t.left+this.win.scrollX-this.win.innerWidth/2,0,this.win.document.body.scrollWidth),i=this.clamp(this.constants.SCROLL_OFFSET_Y+t.top+this.win.scrollY-this.win.innerHeight/2+100,0,this.height);this.win.scrollTo(n,i)}isTextNodeVisible(e){const t=e.parentElement;return!!t&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}clamp(e,t,n){return Math.max(t,Math.min(e,n))}getSelection(){const e=this.win.document.getSelection().toString();this.ui.webSearchCurrentSelection(e)}toString(){return this.constructor.name}}},704:(e,t,n)=>{"use strict";t.q=void 0;const i=n(528),r=n(629);class s{constructor(e){this.native=e,this.logger=new r.BeamLogger(this.native.win,i.BeamLogCategory.embedNode)}static getInstance(e){let t;try{const n=i.Native.getInstance(e,"SearchWebPage");t=new s(n)}catch(e){t=null}return t}webPageSearch(e){this.native.sendMessage("webPageSearch",e)}webSearchCurrentSelection(e){this.native.sendMessage("webSearchCurrentSelection",{selection:e})}toString(){return this.constructor.name}}t.q=s}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(528),t=n(81),i=n(704);const r=e.Native.getInstance(window,"SearchWebPage"),s=new i.q(r);window.beam||(window.beam={}),window.beam.__ID__SearchWebPage=new t.c(window,s)})()})();